%\chapter{Pont diviseur}


\section{Démonstration}

Soit le pont diviseur de tension formé par les deux résistances $R_1$ et $R_2$.\\
Le pont est alimenté avec la tension de la batterie.\\
La tension de sortie $V_s$ va en entrée de la carte Arduino. (A0)


\begin{schema}{Le pont diviseur}
  \addPower{6,4}{power1}{$V_{Batterie}$}
  \addResistor{power1}{\Down}{6,2}{\orthogonalWireA}{$R1$}
  \addNode{6.5,2.3}{node1}{$V_s$}
  \addResistor{6,2}{\Down}{6,0}{\orthogonalWireA}{$R2$}
  \addGround{6,0}{gnd1}{}
 \end{schema}


La tension en sortie d'un pont diviseur de tension vaut :

 $$ V_s = V_{Batterie} \cdot \frac{R_2}{R_1+R_2} $$\\

 La résolution du Convertisseur Analogique Numérique de l'Arduino est de 10 bits, c'est à dire que la CAN va donner une valeur $N_{CAN}$ comprise entre 0 et $2^{10}-1$, c'est à dire entre 0 et 1023.\\

 Ainsi, si le CAN affiche une valeur de 1023, cela veut dire que $V_s=3.3V$ et si $N_{CAN}=512$, la tension $V_s$ vaut environ 1.65 V.


 La tension $V_s$ est obtenue par la relation suivante : 

 %$$ V_s = N_{CAN} \cdot \frac{Tension_{référence}}{Résolution_{CAN}} = N_{CAN}\cdot \frac{3.3}{2^{10}}$$\\

 La tension de référence est généralement la tension de fonctionnement du microcontrôleur, c'est à dire ici 3.3V.

 On obtient donc la formule liant $V_{Batterie}$ et la valeur $N_{CAN}$ :

 %$$ V_{Batterie} = \frac{R_1+R_2}{R_2} \cdot N_{CAN} \cdot \frac{3.3}{2^{10}}$$\\


 Cette formule sera utilisé pour déterminer la tension réelle de la batterie en fonction du Convertisseur Analogique Numérique.


 %\chapter{Schéma passerelle}

 \img{\rootImages/schema_passerelle.png}{Schéma de la passerelle}{0.7}

 \chapter{Schéma sonde}

 \img{\rootImages/schema_sonde.png}{Schéma de la sonde}{0.6}


 \chapter{Questions}

\Question{Pourquoi ma passerelle n'est pas détectée sur Domoticz ?}
\Reponse{Une erreur fréquente est de sélectionner le mauvais port lors de la configuration de la passerelle dans Domoticz.}

 
 
\Question{Pourquoi la passerelle allume sa LED rouge ?}
\Reponse{La LED rouge veut dire que des erreurs de communication sont survenues entre la passerelle et la sonde. Vérifier les branchements de la sonde. }


